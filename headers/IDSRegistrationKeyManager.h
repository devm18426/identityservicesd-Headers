/*
* This header is generated by classdump-dyld 1.0
* on Thursday, March 2, 2023 at 12:47:58 PM Israel Standard Time
* Operating System: Version 11.2.3 (Build 20D91)
* Image Source: /System/Library/PrivateFrameworks/IDS.framework/identityservicesd.app/Contents/MacOS/identityservicesd
* classdump-dyld is licensed under GPLv3, Copyright Â© 2013-2016 by Elias Limneos.
*/

#import <identityservicesd/identityservicesd-Structs.h>
#import <libobjc.A.dylib/IDSClientDataRegistrationKeyManager.h>
#import <libobjc.A.dylib/IMSystemMonitorListener.h>

@protocol IDSRegistrationKeyManagerKeyPairProvider;
@class NSRecursiveLock, IDSNGMKeyLoadingErrorContainer, IDSRegistrationKeyConfig, IMTimer, IMSystemMonitor, IDSKeychainWrapper, IDSRegistrationKeyManagerIdentityDataSource, IDSRateLimiter;

@interface IDSRegistrationKeyManager : NSObject <IDSClientDataRegistrationKeyManager, IMSystemMonitorListener> {

	NSRecursiveLock* _lock;
	char _forceRoll;
	char _loaded;
	char _identityLoaded;
	char _detectedMigrationNeeded;
	char _needsReRegister;
	char _pendingIdentityRegeneration;
	char _hasCheckedMigrationThisLaunch;
	char _failedToGeneratedPublicDataForNGMIdentity;
	IDSNGMKeyLoadingErrorContainer* _recentKeyLoadingErrors;
	IDSRegistrationKeyConfig* _config;
	IMTimer* _purgePreviousIdentityTimer;
	IMTimer* _regenerateIdentityTimer;
	IMSystemMonitor* _systemMonitor;
	IDSKeychainWrapper* _keychainWrapper;
	IDSRegistrationKeyManagerIdentityDataSource* _identityDataSource;
	IDSRateLimiter* _loadingRateLimiter;
	id<IDSRegistrationKeyManagerKeyPairProvider> _keyPairProvider;
	char _allowPairingIdentities;
	char _allowRegenerateRegisteredIdentity;

}

@property (nonatomic,retain) IMSystemMonitor * systemMonitor;                                               //@synthesize systemMonitor=_systemMonitor - In the implementation block
@property (nonatomic,retain) IDSKeychainWrapper * keychainWrapper;                                          //@synthesize keychainWrapper=_keychainWrapper - In the implementation block
@property (nonatomic,retain) IDSRateLimiter * loadingRateLimiter;                                           //@synthesize loadingRateLimiter=_loadingRateLimiter - In the implementation block
@property (nonatomic,retain) id<IDSRegistrationKeyManagerKeyPairProvider> keyPairProvider;                  //@synthesize keyPairProvider=_keyPairProvider - In the implementation block
@property (assign,nonatomic) char allowPairingIdentities;                                                   //@synthesize allowPairingIdentities=_allowPairingIdentities - In the implementation block
@property (assign,nonatomic) char allowRegenerateRegisteredIdentity;                                        //@synthesize allowRegenerateRegisteredIdentity=_allowRegenerateRegisteredIdentity - In the implementation block
@property (nonatomic,retain) IDSRegistrationKeyConfig * config;                                             //@synthesize config=_config - In the implementation block
@property (nonatomic,retain) IDSRegistrationKeyManagerIdentityDataSource * identityDataSource;              //@synthesize identityDataSource=_identityDataSource - In the implementation block
@property (assign,nonatomic) char forceRoll;                                                                //@synthesize forceRoll=_forceRoll - In the implementation block
+(id)sharedInstance;
+(char)setupKeys;
-(void)dealloc;
-(id)init;
-(IDSRegistrationKeyConfig *)config;
-(void)setConfig:(IDSRegistrationKeyConfig *)arg1 ;
-(void)systemDidLeaveFirstDataProtectionLock;
-(void)systemDidLeaveDataProtectionLock;
-(void)regenerateRegisteredIdentity;
-(_SecKey*)identityPrivateKey;
-(_SecKey*)identityPublicKey;
-(char)_save;
-(IMSystemMonitor *)systemMonitor;
-(IDSKeychainWrapper *)keychainWrapper;
-(void)setKeychainWrapper:(IDSKeychainWrapper *)arg1 ;
-(id)errorContainerToReport;
-(void)_loadIfNeeded:(char)arg1 ;
-(void)regeneratePairingIdentitiesIncludingClassD:(char)arg1 ;
-(char)_migrateRegisteredIdentityFromClassDtoClassCIfNeeded;
-(void)loadPairingIdentities:(char)arg1 ;
-(IDSRegistrationKeyManagerIdentityDataSource *)identityDataSource;
-(char)_serializeAndPersistIdentityContainer:(id)arg1 identityIdentifier:(long long)arg2 deleteIfNull:(char)arg3 ;
-(void)_serializeAndPersistBuildOfIdentityGeneration:(id)arg1 itemName:(id)arg2 ;
-(char)allowPairingIdentities;
-(void)_saveClassXIdentity:(id*)arg1 savedIdentity:(id*)arg2 protectionClass:(long long)arg3 savedUnsavedIdentity:(char*)arg4 ;
-(id<IDSRegistrationKeyManagerKeyPairProvider>)keyPairProvider;
-(char)_isUnderFirstDataProtectionLock;
-(id)_loadAndDeserializeBuildOfIdentityGenerationForItemName:(id)arg1 ;
-(id)accountSigningKeyReference;
-(double)_purgePreviousIdentityDelay;
-(void)_schedulePurgeOfPreviousIdentityAfterDelay:(double)arg1 ;
-(char)_generateUnregisteredIdentityWithExistingLegacyIdentity:(id)arg1 existingNGMIdentity:(id)arg2 ;
-(void)_notifyUnregisteredIdentityRegenerated;
-(char)_shouldRegenerateRegisteredIdentity;
-(double)_identityRegenerationDelay;
-(void)_scheduleRegenerationOfRegisteredIdentityAfterDelay:(double)arg1 ;
-(id)_getPublicMessageProtectionDataForIdentity:(id)arg1 ;
-(id)initWithSystemMonitor:(id)arg1 keychainWrapper:(id)arg2 loadingRateLimiter:(id)arg3 identityDataSource:(id)arg4 allowPairingIdentities:(char)arg5 allowRegenerateRegisteredIdentity:(char)arg6 keyPairProvider:(id)arg7 ;
-(id)fullDeviceIdentityContainerUsableForKeyType:(unsigned long long)arg1 ;
-(id)latestMessageProtectionFullIdentityForDataProtectionClass:(unsigned)arg1 ;
-(char)_loadClassAIdentityIfNeeded:(id*)arg1 ;
-(char)_loadClassCIdentityIfNeeded:(id*)arg1 ;
-(char)_loadClassDIdentityIfNeeded:(id*)arg1 ;
-(id)_generateIdentityWithExistingIdentity:(id)arg1 identifier:(long long)arg2 dataProtectionClass:(long long)arg3 ;
-(char)_isSecurelyStoringIdentity:(id)arg1 withExpectedProtectionClass:(long long)arg2 ;
-(char)_migrateIdentity:(id)arg1 toProtectionClass:(long long)arg2 ;
-(double)_notifyRegenerateDelay;
-(SecMPFullIdentityRef)latestCopyMessageProtectionIdentityForDataProtectionClass:(unsigned)arg1 ;
-(id)publicMessageProtectionDeviceIdentityContainerToRegister:(id*)arg1 ;
-(void)_ensureIdentity:(id*)arg1 savedIndentity:(id*)arg2 protectionClass:(long long)arg3 didSaveIdentity:(char*)arg4 ;
-(id)publicMessageProtectionDataToRegisterForClassA;
-(id)publicMessageProtectionDataToRegisterForClassC;
-(id)publicMessageProtectionDataToRegisterForClassD;
-(char)requiresKeychainMigration;
-(char)allowRegenerateRegisteredIdentity;
-(void)_purgePreviousIdentityTimerFired;
-(void)_purgePreviousIdentityFromMemoryAndKeychain;
-(void)_regenerateIdentityTimerFired;
-(double)_randomizedIdentityRegenerationInterval;
-(void)setForceRoll:(char)arg1 ;
-(id)generateCSRForUserID:(id)arg1 ;
-(id)fullDeviceIdentityContainer;
-(id)previousFullDeviceIdentityContainer;
-(id)publicMessageProtectionIdentityDataToRegisterWithError:(id*)arg1 ;
-(id)keyTransparencyVersionNumberToRegisterForServiceType:(id)arg1 ;
-(SecMPFullIdentityRef)copyMessageProtectionIdentity;
-(SecMPFullIdentityRef)copyPreviousMessageProtectionIdentity;
-(id)publicMessageProtectionData;
-(id)fullMessageProtectionIdentity;
-(id)previousFullMessageProtectionIdentity;
-(id)fullMessageProtectionIdentityForDataProtectionClass:(unsigned)arg1 ;
-(void)notePublicIdentityDidRegisterLegacyData:(id)arg1 ngmIdentityData:(id)arg2 ngmPrekeyData:(id)arg3 ;
-(void)purgeMessageProtectionIdentity;
-(id)keyPairSignature;
-(char)needsPublicDataUpdated;
-(char)isMigratedKeyPairSignature;
-(char)isUsingSecureStorageForClassA;
-(char)isUsingSecureStorageForClassC;
-(char)migrateToSecureStorageForClassA;
-(char)migrateToSecureStorageForClassC;
-(void)setSystemMonitor:(IMSystemMonitor *)arg1 ;
-(IDSRateLimiter *)loadingRateLimiter;
-(void)setLoadingRateLimiter:(IDSRateLimiter *)arg1 ;
-(void)setIdentityDataSource:(IDSRegistrationKeyManagerIdentityDataSource *)arg1 ;
-(void)setAllowPairingIdentities:(char)arg1 ;
-(void)setAllowRegenerateRegisteredIdentity:(char)arg1 ;
-(char)forceRoll;
-(void)setKeyPairProvider:(id<IDSRegistrationKeyManagerKeyPairProvider>)arg1 ;
@end

